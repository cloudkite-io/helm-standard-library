# Default configMap
{{- if .Values.configMap }}
{{- include "standard-app.configMap" (dict "name" .Release.Name "namespace" $.Release.Namespace "data" .Values.configMap) }}
---
{{- end }}

# Deployment configMap
{{- range $appName, $appConfig := .Values.apps -}}
  {{- if $appConfig.volumes }}
    {{- range $appConfig.volumes }}
      {{- if .type.configMap }}
        {{- include "standard-app.configMap" (dict "name" $appName "namespace" $.Release.Namespace "data" .configMapData) }}
---
      {{- end }}
    {{- end }}
  {{- end }}
{{- end }}

# cronJob configMap
{{- range $cronjobName, $cronjobConfig := .Values.cronjobs -}}
  {{- if $cronjobConfig.volumes }}
    {{- range $cronjobConfig.volumes }}
      {{- if .type.configMap }}
        {{- include "standard-app.configMap" (dict "name" .type.configMap.name "namespace" $.Release.Namespace "data" .configMapData) }}
---
      {{- end }}
    {{- end }}
  {{- end }}
{{- end }}

# job configMap
{{- range $jobName, $jobConfig := .Values.jobs -}}
  {{- if $jobConfig.volumes }}
    {{- range $jobConfig.volumes }}
      {{- if .type.configMap }}
        {{- include "standard-app.configMap" (dict "name" .type.configMap.name "namespace" $.Release.Namespace "data" .configMapData) }}
---
      {{- end }}
    {{- end }}
  {{- end }}
{{- end }}
